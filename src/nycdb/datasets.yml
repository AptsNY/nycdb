---
pluto_16v2:
  files:
    -
      url: https://www1.nyc.gov/assets/planning/download/zip/data-maps/open-data/nyc_pluto_16v2%20.zip
      dest: pluto_16v2.zip
  schema:
    table_name: pluto_16v2
    fields:
      Borough: text
      Block: integer
      Lot: integer
      CD: smallint
      CT2010: text
      CB2010: text
      SchoolDist: smallint
      Council: smallint
      ZipCode: char(5)
      FireComp: text
      PolicePrct: text
      HealthArea: text
      SanitBoro: char(1)
      SanitDistrict: smallint
      SanitSub: char(2)
      Address: text
      ZoneDist1: text
      ZoneDist2: text
      ZoneDist3: text
      ZoneDist4: text
      Overlay1: text
      Overlay2: text
      SPDist1: text
      SPDist2: text
      SPDist3: text
      LtdHeight: text
      SplitZone: boolean
      BldgClass: char(2)
      LandUse: smallint
      Easements: text
      OwnerType: char(1)
      OwnerName: text
      LotArea: bigint
      BldgArea: bigint
      ComArea: bigint
      ResArea: bigint
      OfficeArea: bigint
      RetailArea: bigint
      GarageArea: bigint
      StrgeArea: bigint
      FactryArea: bigint
      OtherArea: bigint
      AreaSource: text
      NumBldgs: integer
      NumFloors: numeric
      UnitsRes: integer
      UnitsTotal: integer
      LotFront: numeric
      LotDepth: numeric
      BldgFront: numeric
      BldgDepth: numeric
      Ext: text
      ProxCode: char(1)
      IrrLotCode: boolean
      LotType: char(1)
      BsmtCode: char(1)
      AssessLand: bigint
      AssessTot: bigint
      ExemptLand: bigint
      ExemptTot: bigint
      YearBuilt: smallint
      YearAlter1: smallint
      YearAlter2: smallint
      HistDist: text
      Landmark: text
      BuiltFAR: numeric
      ResidFAR: numeric
      CommFAR: numeric
      FacilFAR: numeric
      BoroCode: char(1)
      BBL: char(10)
      CondoNo: text
      Tract2010: text
      XCoord: integer
      YCoord: integer
      ZoneMap: text
      ZMCode: char(1)
      Sanborn: text
      TaxMap: text
      EDesigNum: text
      APPBBL: char(10)
      APPDate: date
      PLUTOMapID: char(1)
      Version: text
      lng: numeric
      lat: numeric
      
dobjobs:
  files:
    -
      url: https://data.cityofnewyork.us/api/views/ic3t-wcy2/rows.csv?accessType=DOWNLOAD
      dest: dobjobs.csv

hpd_complaints:
  files:
    -
      url: https://data.cityofnewyork.us/api/views/uwyv-629c/rows.csv?accessType=DOWNLOAD
      dest: hpd_complaints.csv
  schema:
    table_name: hpd_complaints
    fields:
      ComplaintID: integer
      BuildingID: integer
      BoroughID: integer
      Borough: text
      HouseNumber: text
      StreetName: text
      Zip: text
      Block: integer
      Lot: integer
      Apartment: text
      CommunityBoard: integer
      ReceivedDate: date
      StatusID: integer
      Status: text
      StatusDate: date
      bbl: char(10)
    date-format: 'mm/dd/yyyy'

dob_complaints:
  files:
    -
      url: https://nycopendata.socrata.com/api/views/eabe-havv/rows.csv?accessType=DOWNLOAD
      dest: dob_complaints.csv
  schema:
    table_name: dob_complaints
    fields:
      complaint_number: integer
      status: text
      date_entered: date
      house_number: text
      zip_code: text
      house_street: text
      bin: integer
      community_board: integer
      special_district: text
      complaint_category: text
      unit: text
      disposition_date: date
      disposition_code: text
      inspection_date: date
      dobrundate: date

hpd_violations:
  files:
    - 
      url: https://data.cityofnewyork.us/api/views/wvxf-dwi5/rows.csv?accessType=DOWNLOAD
      dest: hpd_violations.csv
  sql:
    - hpd_violations.sql
  schema:
    table_name: hpd_violations
    fields:
      ViolationID: integer
      BuildingID: integer
      RegistrationID: integer
      BoroID: char(1)
      Borough: text
      HouseNumber: text
      LowHouseNumber: text
      HighHouseNumber: text
      StreetName: text 
      StreetCode: text
      Postcode: char(5)
      Apartment: text
      Story: text
      Block: integer
      Lot: integer
      Class: char(1)
      InspectionDate: date
      ApprovedDate: date 
      OriginalCertifyByDate: date
      OriginalCorrectByDate: date
      NewCertifyByDate: date
      NewCorrectByDate: date
      CertifiedDate: date
      OrderNumber: text
      NOVID: integer 
      NOVDescription: text
      NOVIssuedDate: date
      CurrentStatusID: smallint
      CurrentStatus: text
      CurrentStatusDate: date
      NovType: text
      ViolationStatus: text
      Latitude: numeric
      Longitude: numeric
      CommunityBoard: text
      CouncilDistrict: smallint
      CensusTract: text
      BIN: integer
      BBL: char(10)
      NTA: text

hpd_registrations:
  files:
    -
      url: https://data.cityofnewyork.us/api/views/tesw-yqqr/rows.csv?accessType=DOWNLOAD
      dest: hpd_registrations.csv
    -
      url: https://data.cityofnewyork.us/api/views/feu5-w2e2/rows.csv?accessType=DOWNLOAD
      dest: hpd_contacts.csv
  sql:
    - hpd_registrations/address_cleanup.sql
    - hpd_registrations/registrations_cleanup.sql
    - hpd_registrations/anyarray_uniq.sql
    - hpd_registrations/anyarray_remove_null.sql
    - hpd_registrations/first_last.sql
#    - hpd_registrations/corporate_owners.sql
    
  schema:
    -
      table_name: hpd_registrations
      fields:
        registrationID: integer
        buildingID: integer
        boroID: smallint
        boro: text
        housenumber: text
        lowhousenumber: text
        highhousenumber: text
        streetname: text
        streetcode: integer
        zip: text
        block: smallint
        lot: smallint
        BIN: integer
        communityboard: smallint
        lastregistrationdate: date
        registrationenddate: date
    -
      table_name: hpd_contacts
      fields:
        registrationcontactID: integer
        registrationID: integer
        type: text
        ContactDescription: text
        CorporationName: text
        Title: text
        FirstName: text
        MiddleInitial: text
        LastName: text
        BusinessHouseNumber: text
        BusinessStreetName: text
        BusinessApartment: text
        BusinessCity: text
        BusinessState: text
        BusinessZip: text
